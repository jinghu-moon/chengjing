/* src/style/SettingsPanel.css */

/* =================================================================
   设置面板主容器
   ================================================================= */
.settings-panel {
  position               : fixed;
  top                    : var(--space-4);
  right                  : var(--space-4);
  bottom                 : var(--space-4);
  width                  : 360px;
  background             : var(--bg-panel);
  backdrop-filter        : blur(var(--blur-md));
  -webkit-backdrop-filter: blur(var(--blur-md));
  border                 : var(--border-glass);
  border-radius          : var(--radius-xl);
  z-index                : var(--z-dropdown);
  transform              : translateX(120%);
  transition             : transform 0.4s var(--ease-smooth);
  display                : flex;
  flex-direction         : column;
  box-shadow             : var(--shadow-lg);
  color                  : var(--text-primary);
}

.settings-panel.open {
  transform: translateX(0);
}

/* 背景遮罩 */
.settings-overlay {
  position       : fixed;
  inset          : 0;
  background     : rgba(0, 0, 0, 0.2);
  backdrop-filter: blur(var(--blur-sm));
  z-index        : var(--z-float);
  opacity        : 0;
  pointer-events : none;
  transition     : opacity 0.3s;
}

.settings-overlay.open {
  opacity       : 1;
  pointer-events: auto;
}

/* =================================================================
   面板头部
   ================================================================= */
.panel-header {
  padding        : var(--space-6) var(--space-6) var(--space-4);
  display        : flex;
  justify-content: space-between;
  align-items    : center;
}

.panel-title {
  font-size     : 20px;
  font-weight   : 700;
  letter-spacing: -0.5px;
  color         : var(--text-primary);
}

.close-btn {
  width          : var(--height-sm);
  height         : var(--height-sm);
  border-radius  : var(--radius-full);
  background     : var(--bg-input);
  display        : flex;
  align-items    : center;
  justify-content: center;
  cursor         : pointer;
  transition     : all 0.2s;
  color          : var(--text-primary);
}

.close-btn:hover {
  background: var(--bg-active);
  transform : rotate(90deg);
}

/* =================================================================
   面板内容区域
   ================================================================= */
.panel-content {
  flex          : 1;
  overflow-y    : auto;
  padding       : 0 var(--space-4) var(--space-6);
  display       : flex;
  flex-direction: column;
  gap           : var(--space-4);
}

.panel-content::-webkit-scrollbar {
  width: 4px;
}

.panel-content::-webkit-scrollbar-thumb {
  background   : var(--mask-light);
  border-radius: var(--radius-xs);
}

/* =================================================================
   折叠卡片组件
   ================================================================= */
.section-card {
  background    : var(--bg-panel-card);
  border        : var(--border-glass);
  border-radius : var(--radius-lg);
  display       : flex;
  flex-direction: column;
  transition    : background 0.3s cubic-bezier(0.55, 0.00, 0.10, 1.00), border 0.3s cubic-bezier(0.55, 0.00, 0.10, 1.00);
  box-shadow    : 0 0 0 0 transparent;
}

.section-card:hover {
  background  : var(--bg-hover-card);
  border-color: var(--text-tertiary);
  box-shadow  : 0 4px 16px rgba(var(--nord10-rgb), 0.12);
}

.section-card:last-of-type {
  margin-bottom: 0;
}

/* 卡片头部 */
.card-header {
  height         : 52px;
  padding        : 0 var(--space-4);
  display        : flex;
  justify-content: space-between;
  align-items    : center;
  cursor         : pointer;
  user-select    : none;
}

.header-label {
  display       : flex;
  align-items   : center;
  gap           : var(--space-2);
  font-size     : 13px;
  font-weight   : 600;
  color         : var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.toggle-icon {
  color     : var(--text-tertiary);
  transition: transform 0.3s var(--ease-smooth);
}

.section-card.collapsed .toggle-icon {
  transform: rotate(-90deg);
}

/* =================================================================
   折叠动画 - 与 Vue JS 动画配合
   ================================================================= */
.accordion-enter-active,
.accordion-leave-active {
  transition: height 0.3s var(--ease-smooth);
  overflow  : hidden;
}

.card-content-inner {
  padding       : 0 var(--space-4) var(--space-4);
  display       : flex;
  flex-direction: column;
  gap           : var(--space-3);
}

/* =================================================================
   通用控件样式
   ================================================================= */
.divider {
  height    : 1px;
  background: var(--border-divider);
  margin    : var(--space-1) 0;
}

.sub-item-wrapper {
  position    : relative;
  padding-left: var(--space-4);
  margin-top  : calc(var(--space-2) * -1);
}

.sub-item-wrapper::before {
  content   : '';
  position  : absolute;
  left      : 0;
  top       : 50%;
  width     : var(--space-2);
  height    : 1px;
  background: var(--text-tertiary);
}

.control-row {
  display        : flex;
  justify-content: space-between;
  align-items    : center;
  min-height     : var(--height-xs);
  font-size      : 14px;
  font-weight    : 500;
  color          : var(--text-primary);
}

/* 上传区域 */
.upload-area {
  margin-top     : var(--space-2);
  background     : var(--bg-input);
  border         : 1px dashed var(--text-tertiary);
  border-radius  : var(--radius-ml);
  height         : var(--height-xl);
  display        : flex;
  align-items    : center;
  justify-content: center;
  gap            : var(--space-2);
  cursor         : pointer;
  transition     : all 0.2s;
  font-size      : 13px;
  color          : var(--text-secondary);
}

.upload-area:hover {
  background  : var(--bg-hover);
  border-color: var(--text-secondary);
}

/* =================================================================
   按钮样式
   ================================================================= */
.actions-grid {
  display              : grid;
  grid-template-columns: 1fr 1fr;
  gap                  : var(--space-3);
}

.btn {
  display        : flex;
  align-items    : center;
  justify-content: center;
  gap            : var(--space-2);
  padding        : var(--space-2) var(--space-3);
  border-radius  : var(--radius-md);
  font-size      : 13px;
  font-weight    : 500;
  cursor         : pointer;
  border         : none;
  transition     : all 0.2s;
  color          : var(--text-primary);
}

.btn.sm {
  padding  : var(--space-2) 10px;
  font-size: 12px;
  height   : var(--height-xs);
}

.btn.secondary {
  background: var(--bg-hover);
  color     : var(--text-primary);
}

.btn.secondary:hover {
  background: var(--bg-active);
}

/* 危险操作区域 */
.danger-zone {
  margin-top     : auto;
  display        : flex;
  justify-content: center;
  padding-top    : 10px;
}

.text-btn.danger {
  background   : transparent;
  border       : none;
  color        : rgba(var(--nord11-rgb), 0.6);
  font-size    : 12px;
  display      : flex;
  align-items  : center;
  gap          : var(--space-2);
  cursor       : pointer;
  padding      : var(--space-2) var(--space-4);
  border-radius: var(--radius-md);
  transition   : 0.2s;
}

.text-btn.danger:hover {
  background: var(--color-danger-bg);
  color     : var(--color-danger);
}

/* =================================================================
   滑动淡入淡出动画
   ================================================================= */
.slide-fade-enter-active,
.slide-fade-leave-active {
  transition: all 0.3s ease;
  overflow  : hidden;
  max-height: 400px;
  opacity   : 1;
}

.slide-fade-enter-from,
.slide-fade-leave-to {
  max-height: 0;
  opacity   : 0;
  margin-top: 0;
  padding   : 0;
}

.sub-settings {
  display       : flex;
  flex-direction: column;
  gap           : var(--space-3);
}

/* =================================================================
   自定义下拉选择器
   ================================================================= */
/* 已替换为 CustomSelect 组件，原有样式移除 */

/* =================================================================
   视图切换按钮组 (Segmented Control)
   ================================================================= */
.view-toggles {
  display: flex;
  background: var(--bg-input);
  padding: 2px;
  border-radius: var(--radius-md);
  gap: 2px;
}

.view-toggles button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 28px;
  border: none;
  background: transparent;
  border-radius: var(--radius-sm);
  color: var(--text-tertiary);
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.view-toggles button:hover {
  color: var(--text-secondary);
  background: var(--bg-hover);
}

.view-toggles button.active {
  background: var(--bg-panel-card); /* 或者使用高亮色，视主题而定 */
  color: var(--color-primary);
  box-shadow: var(--shadow-sm);
  font-weight: bold;
}