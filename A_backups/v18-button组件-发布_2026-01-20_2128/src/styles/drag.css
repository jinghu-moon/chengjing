/* ======================================================
   全局拖拽样式系统 (Global Drag & Drop Styles)
   适用于 useSimpleDrag Hook
   ====================================================== */

/* 1. 拖拽镜像 (Proxy/Mirror)
   这是跟随鼠标移动的克隆体。
   必须 append 到 body，且必须 pointer-events: none 以便穿透检测下方元素。
*/
.drag-mirror-proxy {
  position: fixed;
  z-index: 999999; /* 确保永远在最顶层 */
  pointer-events: none; /* 关键：必须让鼠标穿透，否则无法检测目标格子 */
  margin: 0; /* 清除可能存在的 margin */

  /* 视觉增强 */
  opacity: 0.95;
  background: var(--bg-element, #fff); /* 使用主题变量 */
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3); /* 强烈的悬浮阴影 */
  border-radius: 6px; /* 保持圆角 */

  /* 动感效果：稍微放大并倾斜，模拟"提起来"的物理感 */
  transform: scale(1.05) rotate(2deg);
  transform-origin: center center;

  /* 动画优化：只对 transform 做过渡，不要给 left/top 加过渡(否则跟手有延迟) */
  transition:
    transform 0.15s cubic-bezier(0.18, 0.89, 0.32, 1.28),
    background-color 0.15s,
    border-color 0.15s;
  will-change: transform, left, top; /* 硬件加速提示 */
}

/* 1.1 克隆镜像悬停在有效目标上的状态 (可放置反馈) */
.drag-mirror-can-drop {
  /* 蓝色实线边框 */
  outline: 2px solid #409eff !important;
  outline-offset: -2px;

  /* 摆正，暗示"准备放下" */
  transform: scale(1.02) rotate(0deg) !important;

  /* 蓝色发光阴影 */
  box-shadow: 0 8px 24px rgba(64, 158, 255, 0.3) !important;
}

/* 1.2 飞入目标动画 (松开鼠标时) */
.drag-fly-to-target {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1) !important;
  opacity: 0.8 !important;
  transform: scale(1) rotate(0deg) !important;
  box-shadow: 0 4px 12px rgba(64, 158, 255, 0.2) !important;
}

/* 2. 原地幽灵 (Source Ghost)
   留在列表原位置的元素，变淡 + 蓝色虚线边框。
   使用 outline 而不是 border，不影响布局。
*/
.drag-source-ghost {
  opacity: 0.4 !important;
  outline: 2px dashed #409eff !important;
  outline-offset: -2px;
  background: rgba(64, 158, 255, 0.08) !important;
  transition: opacity 0.2s;
}

/* 2.1 目标盒子内的预览占位符
   当拖拽到目标盒子时，显示在目标盒子内的预览。
   使用 outline 而不是 border，不影响布局。
*/
.drop-preview-placeholder {
  opacity: 0.6 !important;
  outline: 2px dashed #409eff !important;
  outline-offset: -2px;
  background: rgba(64, 158, 255, 0.1) !important;
  pointer-events: none;
  flex: none !important;
}

/* 3. 放置目标高亮 (Drop Target)
   当拖拽元素悬停在可放置的日期格子上时。
   需配合 Vue 模板 :class="{ 'drop-target-active': ... }" 使用。
*/
.drop-target-active {
  /* 使用半透明主题色背景 */
  background-color: rgb(from var(--color-primary, #409eff) r g b / 0.15) !important;

  /* 内发光边框，比 border 更不影响布局 */
  box-shadow: inset 0 0 0 2px var(--color-primary, #409eff) !important;

  /* 微妙的按压反馈 */
  transition: all 0.1s;
}

/* 4. 全局抓取光标 (Global Cursor)
   强制整个页面的光标变为"抓取中"，防止鼠标移出元素过快时光标闪烁。
*/
body.body-grabbing {
  cursor: grabbing !important;
  user-select: none; /* 禁止选中文本 */
}

body.body-grabbing * {
  cursor: grabbing !important;
}

/* 5. 可拖拽元素的默认样式 */
.draggable-item {
  cursor: grab;
  user-select: none;
}

.draggable-item:active {
  cursor: grabbing;
}
