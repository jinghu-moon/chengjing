# 项目架构深度分析报告

经过对 `lime-tab` 项目的深度扫描与代码审计，以下是核心架构与代码逻辑的详细拆解。

## 1. 项目全景 (Project Overview)
**Lime Tab (青柠起始页)** 是一个基于 **Manifest V3** 标准开发的 Chrome 浏览器扩展，旨在替代默认的新标签页。它主打极简美学（毛玻璃/磨砂质感）与生产力工具的深度集成。

## 2. 技术栈架构 (Tech Stack)
*   **核心框架**: [Vue 3](file:///d%3A/100_Projects/110_Daily/lime-tab/package.json#L32) (Composition API + `<script setup>`)
*   **开发语言**: [TypeScript](file:///d%3A/100_Projects/110_Daily/lime-tab/package.json#L39) (强类型约束)
*   **构建工具**: [Vite 5](file:///d%3A/100_Projects/110_Daily/lime-tab/package.json#L40) (极速冷启动与热更新)
*   **样式方案**: CSS Variables + Sass (主题色与动态模糊效果)
*   **数据存储**:
    *   **LocalStorage**: 存储轻量级数据（待办事项、用户配置、图标布局）。
    *   **IndexedDB**: 通过 [utils/db.ts](file:///d%3A/100_Projects/110_Daily/lime-tab/src/utils/db.ts) 封装，专门用于存储大体积的壁纸图片（Blob），避免阻塞主线程。

## 3. 核心代码逻辑 (Core Logic)

### 3.1 状态管理 (Composable Pattern)
项目未引入 Pinia/Vuex，而是采用了更轻量的 **Vue Composables** 模式，将业务逻辑封装在 `src/composables` 目录下：

*   **待办事项 ([useTodos.ts](file:///d%3A/100_Projects/110_Daily/lime-tab/src/composables/useTodos.ts))**:
    *   **持久化**: 监听 `todos` 变化并同步写入 `localStorage`。
    *   **性能优化**: 维护了一个 `todosMap` (Computed)，将任务按日期建立索引，实现 O(1) 复杂度的按日查询，避免在大数据量下遍历数组。
    *   **数据结构**: `TodoItem` 包含优先级、标签、截止日期等字段。

*   **全局设置 ([useSettings.ts](file:///d%3A/100_Projects/110_Daily/lime-tab/src/composables/useSettings.ts))**:
    *   **响应式配置**: 管理 `Settings` (功能开关、布局参数) 和 `IconConfig` (图标样式)。
    *   **自动保存**: 同样使用 `watch` 深度监听并自动同步到 `localStorage`。

### 3.2 关键组件模块
*   **NotePad (便签)**: 基于 **Tiptap** 编辑器，支持气泡菜单和富文本，是相比普通 NewTab 扩展的一大亮点。
*   **TodoList (待办)**: 集成 `vue-draggable-plus` 实现拖拽排序，支持按日期分组视图。
*   **Focus Mode (聚焦模式)**: 在 [App.vue](file:///d%3A/100_Projects/110_Daily/lime-tab/src/App.vue) 中通过 CSS 类控制。当搜索框激活时，其余组件透明度降低，减少视觉干扰。

## 4. 目录结构透视
```text
src/
├── components/       # UI 组件 (ClockWeather, NotePad, ShortcutGrid 等)
├── composables/      # 业务逻辑 Hook (核心逻辑所在)
├── utils/            # 工具库 (db.ts, debounce.ts)
├── assets/           # 静态资源
├── App.vue           # 根组件 (负责布局与全局聚焦模式状态)
└── main.ts           # 入口文件
```

## 5. 潜在优化点 (Observations)
1.  **数据同步**: 目前仅依赖本地存储 (`localStorage`/`IndexedDB`)，未接入 `chrome.storage.sync`，意味着用户无法在多设备间同步配置。
2.  **错误处理**: `useTodos` 中的 JSON 解析有基本的 `try-catch`，但缺乏用户感知的错误提示机制。

## 下一步建议
您已完全掌握项目架构。接下来我们可以：
1.  **功能开发**: 添加新组件或集成 Chrome Sync 同步功能。
2.  **代码重构**: 优化现有的组件结构或增加单元测试。
3.  **问题修复**: 针对特定 Bug 进行调试。

请确认此分析是否符合您的预期，并指示下一步行动。
