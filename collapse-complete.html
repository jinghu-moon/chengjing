<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vue æŠ˜å é¢æ¿ç»„ä»¶ - ç‹¬ç«‹ç¤ºä¾‹</title>
  <link rel="stylesheet" href="./src/styles/variables.css">
  <link rel="stylesheet" href="./src/styles/global.css">
  <style>
    .app-container {
      width: 100%;
      max-width: 900px;
      margin: 0 auto;
      padding: var(--space-5);
    }

    .control-panel {
      background-color: var(--bg-panel);
      backdrop-filter: var(--glass-sm);
      border-radius: var(--radius-md);
      padding: var(--space-5) var(--space-6);
      margin-bottom: var(--spacing-lg);
      box-shadow: var(--shadow-sm);
      border: var(--border-glass);
    }

    .control-panel h3 {
      margin: 0 0 var(--space-4) 0;
      font-size: var(--text-md);
      font-weight: var(--weight-semibold);
      color: var(--text-primary);
    }

    .btn-group {
      display: flex;
      gap: var(--space-3);
      margin-bottom: var(--space-4);
    }

    .btn {
      padding: var(--comp-padding-md);
      border-radius: var(--radius-sm);
      border: none;
      cursor: pointer;
      font-size: var(--text-base);
      font-weight: var(--weight-medium);
      transition: var(--transition-base);
    }

    .btn-primary {
      background-color: var(--color-primary);
      color: white;
    }

    .btn-primary:hover {
      background-color: var(--color-primary-hover);
    }

    .demo-container {
      display: flex;
      flex-direction: column;
      gap: var(--space-4);
    }

    .feature-list {
      display: flex;
      flex-direction: column;
      gap: var(--space-2);
    }

    .feature-item {
      font-size: var(--text-base);
      color: var(--text-secondary);
    }

    /* æŠ˜å é¢æ¿æ ·å¼ */
    .t-collapse-item {
      background-color: var(--bg-panel);
      backdrop-filter: var(--glass-sm);
      border-radius: var(--radius-md);
      border: var(--border-glass);
      box-shadow: var(--shadow-xs);
      transition: var(--transition-base);
      overflow: clip;
      display: flex;
      flex-direction: column;
    }

    .t-collapse-item:hover {
      box-shadow: var(--shadow-sm);
      border-color: var(--color-border-glass);
    }

    .t-collapse-item.is-active {
      border-color: var(--color-primary);
      box-shadow: var(--shadow-md);
    }

    .t-collapse-header {
      position: sticky;
      top: 0;
      z-index: var(--z-widget);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--comp-padding-xl);
      background-color: var(--bg-panel);
      backdrop-filter: var(--glass-sm);
      user-select: none;
      border-bottom: 1px solid transparent;
      transition: var(--transition-color);
      gap: var(--space-3);
      flex-shrink: 0;
    }

    .t-collapse-item.is-active > .t-collapse-header {
      border-bottom-color: var(--color-divider);
      background-color: var(--color-primary-alpha);
    }

    .t-collapse-header-left {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      flex: 1;
    }

    .t-collapse-icon {
      width: var(--icon-lg);
      height: var(--icon-lg);
      color: var(--text-secondary);
      transition: transform var(--duration-normal) var(--ease-smooth), 
                  color var(--duration-fast) var(--ease-in-out);
      flex-shrink: 0;
    }

    .t-collapse-item.is-active .t-collapse-icon {
      transform: rotate(180deg);
      color: var(--color-primary);
    }

    .t-collapse-title {
      font-size: var(--text-md);
      font-weight: var(--weight-semibold);
      color: var(--text-primary);
    }

    .toggle-switch {
      position: relative;
      width: 48px;
      height: 28px;
      background-color: rgba(255, 255, 255, 0.15);
      border-radius: var(--radius-full);
      cursor: pointer;
      transition: background-color 0.3s var(--ease-smooth);
      border: 1px solid rgba(255, 255, 255, 0.1);
      flex-shrink: 0;
    }

    .toggle-switch::before {
      content: '';
      position: absolute;
      width: 22px;
      height: 22px;
      background-color: white;
      border-radius: 50%;
      top: 2px;
      left: 2px;
      transition: transform 0.3s var(--ease-smooth);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .toggle-switch.active {
      background-color: var(--color-primary);
    }

    .toggle-switch.active::before {
      transform: translateX(20px);
    }

    .t-collapse-body-wrapper {
      display: grid;
      grid-template-rows: 0fr;
      transition: grid-template-rows var(--duration-normal) var(--ease-out);
      overflow: hidden;
      margin: 0;
      padding: 0;
    }

    .t-collapse-body {
      display: grid;
      grid-template-rows: subgrid;
      overflow: hidden;
      margin: 0;
      padding: 0;
    }

    .t-collapse-content {
      padding: 0 var(--comp-padding-square-xl);
      font-size: var(--text-base);
      line-height: var(--line-normal);
      color: var(--text-secondary);
      min-height: 0;
      transition: padding var(--duration-normal) var(--ease-out), 
                  opacity var(--duration-normal) var(--ease-out);
      opacity: 0;
    }

    .t-collapse-item.is-expand > .t-collapse-body-wrapper {
      grid-template-rows: 1fr;
    }

    .t-collapse-item.is-expand .t-collapse-content {
      padding: var(--comp-padding-square-xl);
      opacity: 1;
    }

    .status-indicator {
      display: inline-block;
      padding: var(--space-1) var(--space-2);
      border-radius: var(--radius-sm);
      font-size: var(--text-sm);
      margin-bottom: var(--space-3);
    }

    .status-indicator.expanded {
      background-color: var(--color-success-bg);
      color: var(--color-success);
    }

    .status-indicator.collapsed {
      background-color: var(--bg-input);
      color: var(--text-tertiary);
    }
  </style>
</head>
<body>
  <div id="app">
    <div class="app-container">
      
      <!-- æ§åˆ¶é¢æ¿ -->
      <div class="control-panel">
        <h3>ğŸ’¡ Vue æŠ˜å é¢æ¿ç»„ä»¶ç¤ºä¾‹</h3>
        
        <div class="btn-group">
          <button class="btn btn-primary" @click="expandAll">å…¨éƒ¨å±•å¼€</button>
          <button class="btn btn-primary" @click="collapseAll">å…¨éƒ¨æ”¶èµ·</button>
        </div>

        <div>
          <span class="status-indicator" :class="panel1Expanded ? 'expanded' : 'collapsed'">
            é¢æ¿1: {{ panel1Expanded ? 'å·²å±•å¼€' : 'å·²æ”¶èµ·' }}
          </span>
          <span class="status-indicator" :class="panel2Expanded ? 'expanded' : 'collapsed'">
            é¢æ¿2: {{ panel2Expanded ? 'å·²å±•å¼€' : 'å·²æ”¶èµ·' }}
          </span>
        </div>
      </div>

      <!-- æŠ˜å é¢æ¿ -->
      <div class="demo-container">
        
        <!-- é¢æ¿ 1 -->
        <collapse-panel 
          v-model="panel1Expanded"
          title="ğŸ“‹ å¾…åŠæ¸…å•è®¾ç½®"
          @change="onPanel1Change"
        >
          <div class="feature-list">
            <div class="feature-item">âœ“ å¼€å¯å¾…åŠæ¸…å•åŠŸèƒ½</div>
            <div class="feature-item">âœ“ é»˜è®¤æŠ˜å æ¸…å•</div>
            <div class="feature-item">âœ“ è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨</div>
            <div class="feature-item">âœ“ æ”¯æŒæ ‡ç­¾åˆ†ç±»</div>
          </div>
        </collapse-panel>

        <!-- é¢æ¿ 2 -->
        <collapse-panel 
          v-model="panel2Expanded"
          title="âš™ï¸ é«˜çº§åŠŸèƒ½"
        >
          <div class="feature-list">
            <div class="feature-item">âœ“ å¯ç”¨å¿«æ·é”®æ”¯æŒ</div>
            <div class="feature-item">âœ“ è‡ªåŠ¨å¤‡ä»½æ•°æ®</div>
            <div class="feature-item">âœ“ ç•ªèŒ„é’Ÿé›†æˆ</div>
            <div class="feature-item">âœ“ å¯¼å‡ºä¸º Markdown</div>
          </div>
        </collapse-panel>

        <!-- é¢æ¿ 3 -->
        <collapse-panel 
          title="ğŸ¨ é»˜è®¤å±•å¼€ç¤ºä¾‹"
          :default-expanded="true"
        >
          <p style="margin-bottom: 12px;">è¿™ä¸ªé¢æ¿é»˜è®¤æ˜¯å±•å¼€çŠ¶æ€ã€‚</p>
          <p>ä½ å¯ä»¥é€šè¿‡è®¾ç½® <code>:default-expanded="true"</code> æ¥å®ç°ã€‚</p>
        </collapse-panel>

      </div>

    </div>
  </div>

  <!-- Vue 3 CDN -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  
  <script>
    const { createApp, ref, computed } = Vue

    // æŠ˜å é¢æ¿ç»„ä»¶
    const CollapsePanel = {
      template: `
        <div 
          class="t-collapse-item" 
          :class="{ 'is-active': isExpanded, 'is-expand': isExpanded }"
        >
          <div class="t-collapse-header">
            <div class="t-collapse-header-left">
              <svg 
                v-if="showIcon"
                class="t-collapse-icon" 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                stroke-width="2"
              >
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
              <span class="t-collapse-title">{{ title }}</span>
            </div>
            <div 
              v-if="showSwitch"
              class="toggle-switch" 
              :class="{ active: isExpanded }"
              @click="toggle"
            ></div>
          </div>
          <div class="t-collapse-body-wrapper">
            <div class="t-collapse-body">
              <div class="t-collapse-content">
                <slot></slot>
              </div>
            </div>
          </div>
        </div>
      `,
      props: {
        title: {
          type: String,
          default: 'æŠ˜å é¢æ¿'
        },
        defaultExpanded: {
          type: Boolean,
          default: false
        },
        showIcon: {
          type: Boolean,
          default: true
        },
        showSwitch: {
          type: Boolean,
          default: true
        },
        modelValue: {
          type: Boolean,
          default: undefined
        }
      },
      emits: ['update:modelValue', 'change', 'expand', 'collapse'],
      setup(props, { emit }) {
        const innerExpanded = ref(props.defaultExpanded)

        const isExpanded = computed({
          get() {
            return props.modelValue !== undefined ? props.modelValue : innerExpanded.value
          },
          set(value) {
            innerExpanded.value = value
            emit('update:modelValue', value)
          }
        })

        const toggle = () => {
          const newValue = !isExpanded.value
          isExpanded.value = newValue
          emit('change', newValue)
          if (newValue) {
            emit('expand')
          } else {
            emit('collapse')
          }
        }

        return {
          isExpanded,
          toggle
        }
      }
    }

    // ä¸»åº”ç”¨
    createApp({
      components: {
        CollapsePanel
      },
      setup() {
        const panel1Expanded = ref(false)
        const panel2Expanded = ref(false)

        const expandAll = () => {
          panel1Expanded.value = true
          panel2Expanded.value = true
        }

        const collapseAll = () => {
          panel1Expanded.value = false
          panel2Expanded.value = false
        }

        const onPanel1Change = (expanded) => {
          console.log('é¢æ¿1çŠ¶æ€å˜åŒ–:', expanded)
        }

        return {
          panel1Expanded,
          panel2Expanded,
          expandAll,
          collapseAll,
          onPanel1Change
        }
      }
    }).mount('#app')
  </script>
</body>
</html>