<template>
  <div class="demo-page">
    <div class="demo-header">
      <h1>Lime Tab ç»„ä»¶æ¼”ç¤º</h1>
      <p>å…¨ç»„ä»¶äº¤äº’ä¸è§†è§‰æ•ˆæœæµ‹è¯•</p>
    </div>

    <div class="demo-grid">
      <!-- ==================== å¡ç‰‡1-2: Toast å·²æ³¨é‡Š ==================== -->
      <!-- Toast ç¤ºä¾‹å·²éšè— -->

      <!-- ==================== å¡ç‰‡3: Dialog ==================== -->
      <section class="demo-section">
        <h2>Dialog å¯¹è¯æ¡†</h2>
        <div class="demo-group">
          <h3>å¸ƒå±€æ¼”ç¤º</h3>
          <div class="demo-row">
            <button
              @click="($event) => dialog.info({
                title: 'å±…ä¸­å¸ƒå±€',
                content: 'æ ‡å‡†æ¨¡æ€å¯¹è¯æ¡†',
                mousePosition: { x: $event.clientX, y: $event.clientY }
              })"
            >Center</button>
            <button
              @click="($event) => dialog.confirm({
                title: 'é¡¶éƒ¨å¸ƒå±€',
                placement: 'top',
                mousePosition: { x: $event.clientX, y: $event.clientY }
              })"
            >Top</button>
            <button
              @click="($event) => dialog.confirm({
                title: 'åº•éƒ¨å¸ƒå±€',
                placement: 'bottom',
                mousePosition: { x: $event.clientX, y: $event.clientY }
              })"
            >Bottom</button>
          </div>
          <div class="demo-row" style="margin-top: 8px;">
            <button
              @click="($event) => dialog.confirm({
                title: 'è·Ÿéšç‚¹å‡»',
                content: 'Popconfirm æ¨¡å¼',
                triggerRect: ($event.currentTarget as HTMLElement).getBoundingClientRect(),
                type: 'warning'
              })"
            >Follow Me</button>
          </div>
        </div>
        <div class="demo-group">
          <h3>è‡ªå®šä¹‰å†…å®¹ (Slot)</h3>
          <div class="demo-row">
            <button @click="customDialogVisible = true">æ‰“å¼€è¡¨å•å¯¹è¯æ¡†</button>
          </div>
        </div>
        <div class="demo-group">
          <h3>å°ºå¯¸é¢„è®¾ & é¢„è®¾é…ç½®</h3>
          <div class="demo-row">
            <button @click="dialog.open({ ...dialogPresets.confirm, title: 'ç¡®è®¤åˆ é™¤', content: 'ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ' })">
              Confirm é¢„è®¾
            </button>
            <button @click="dialog.open({ ...dialogPresets.alert, title: 'æç¤º', content: 'æ“ä½œæˆåŠŸï¼' })">
              Alert é¢„è®¾
            </button>
            <button @click="dialog.open({ ...dialogPresets.danger, title: 'å±é™©æ“ä½œ', content: 'æ­¤æ“ä½œä¸å¯æ¢å¤ï¼' })">
              Danger é¢„è®¾
            </button>
          </div>
          <div class="demo-row" style="margin-top: 8px;">
            <button @click="dialog.open({ title: 'å°å°ºå¯¸', content: '400px å®½åº¦', size: 'small' })">
              Small (400px)
            </button>
            <button @click="dialog.open({ title: 'ä¸­ç­‰å°ºå¯¸', content: '600px å®½åº¦', size: 'medium' })">
              Medium (600px)
            </button>
            <button @click="dialog.open({ title: 'å¤§å°ºå¯¸', content: '800px å®½åº¦', size: 'large' })">
              Large (800px)
            </button>
          </div>
        </div>
      </section>

      <!-- ==================== å¡ç‰‡4-12: Card åŸºç¡€å¡ç‰‡ ==================== -->
      <section class="demo-section">
        <h2>Card åŸºç¡€å¡ç‰‡</h2>
        <div class="demo-group">
          <h3>åŸºç¡€ç”¨æ³•</h3>
          <Card title="åŸºç¡€å¡ç‰‡">
            <template #icon><IconFolder :size="18" /></template>
            <p>è¿™æ˜¯ä¸€ä¸ªåŸºç¡€å¡ç‰‡ï¼Œæ”¯æŒæ ‡é¢˜ã€å›¾æ ‡å’Œå†…å®¹ã€‚</p>
          </Card>
        </div>
        <div class="demo-group">
          <h3>å¸¦æ“ä½œæŒ‰é’®</h3>
          <Card title="é¡¹ç›®è®¾ç½®" :badge="3" badge-type="primary">
            <template #icon><IconSettings :size="18" /></template>
            <template #actions>
              <button class="action-btn" title="ç¼–è¾‘"><IconEdit :size="16" /></button>
              <button class="action-btn" title="åˆ é™¤"><IconTrash :size="16" /></button>
            </template>
            <p>å¡ç‰‡æ”¯æŒå¾½ç« ã€æ“ä½œæŒ‰é’®ç­‰åŠŸèƒ½ã€‚</p>
          </Card>
        </div>
        <div class="demo-group">
          <h3>ä¸‰ç§å°ºå¯¸</h3>
          <div style="display: flex; flex-direction: column; gap: 8px;">
            <Card title="Small å°ºå¯¸" size="sm">
              <p>ç´§å‡‘å¸ƒå±€ï¼Œé€‚åˆåˆ—è¡¨é¡¹ã€‚</p>
            </Card>
            <Card title="Medium å°ºå¯¸" size="md">
              <p>é»˜è®¤å°ºå¯¸ï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯ã€‚</p>
            </Card>
            <Card title="Large å°ºå¯¸" size="lg">
              <p>å®½æ¾å¸ƒå±€ï¼Œé€‚åˆé‡è¦å†…å®¹ã€‚</p>
            </Card>
          </div>
        </div>

        <div class="demo-group">
          <h3>å¸¦é¡µç­¾çš„å¡ç‰‡ (ç´§å‡‘æ¨¡å¼)</h3>
          <Card 
            :tabs="demoTabs" 
            v-model:activeTab="activeTab"
          >
            
            <template #tab0>
              <div style="padding: 4px 0;">
                <div>Content 0</div>
                <div>Content 0</div>
                <div>Content 0</div>
              </div>
            </template>

            <template #tab1>
              <div style="padding: 4px 0;">
                <div>Content 1 - Analysis</div>
                <div>Data Visualization</div>
                <div>Chart Area</div>
                <div>Metrics</div>
                <div>(This tab is taller)</div>
              </div>
            </template>

            <template #tab2>
              <div style="padding: 4px 0;">
                <div>Content 2 - Settings</div>
                <div>Configuration</div>
              </div>
            </template>

            <template #tab3>
              <div style="padding: 4px 0;">
                <div>Content 3 - Logs</div>
              </div>
            </template>
          </Card>
        </div>

        <div class="demo-group">
          <h3>é…ç½®é¢„è®¾ (Option Cards)</h3>
          <div style="background: var(--bg-panel-secondary); padding: 24px; border-radius: 12px; width: 400px; max-width: 100%;">
            <div style="margin-bottom: 12px; color: var(--text-secondary); font-size: 13px; font-weight: 500;">
              <span style="display: flex; align-items: center; gap: 6px;">
                 ğŸ“¦ é…ç½®é¢„è®¾
              </span>
            </div>
            
            <ContainerGroup :columns="1" v-model="selectedCards" gap="12px">

              <List
                size="md"
                selectable
                :value="1"
                title="æç®€æ¨¡å¼"
                subtitle="ä¸“æ³¨å†…å®¹ï¼Œå‡å°‘å¹²æ‰°"
              >
                <template #extra>
                  <IconTag :size="16" style="color: var(--text-tertiary)" />
                </template>
              </List>

              <List
                size="md"
                selectable
                :value="2"
                title="æ ‡å‡†æ¨¡å¼"
                subtitle="å¹³è¡¡åŠŸèƒ½ä¸ç®€æ´"
              >
                <template #extra>
                  <IconTag :size="16" style="color: var(--text-tertiary)" />
                </template>
              </List>

              <List
                size="md"
                selectable
                :value="3"
                title="ä¸“æ³¨æ¨¡å¼"
                subtitle="ç•ªèŒ„é’Ÿ + å¾…åŠï¼Œé«˜æ•ˆå·¥ä½œ"
              >
                <template #extra>
                  <IconTag :size="16" style="color: var(--text-tertiary)" />
                </template>
              </List>

              <List
                size="md"
                selectable
                :value="4"
                title="å±‚æ¬¡"
                subtitle="æ¢ç´¢æ›´å¤šå±‚çº§ç»“æ„"
              >
                <template #extra>
                  <IconTag :size="16" style="color: var(--text-tertiary)" />
                </template>
              </List>

              <Card
                dashed
                clickable
                hoverable
                size="md"
                @click="console.log('Add new preset')"
              >
                <div style="display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; color: var(--text-secondary);">
                  <component :is="IconPlus" size="18" stroke-width="2" />
                  <span style="font-size: 14px; font-weight: 500;">æ–°å»ºé¢„è®¾</span>
                </div>
              </Card>



            </ContainerGroup>

            <div style="margin-top: 16px; font-size: 13px; color: var(--text-tertiary); text-align: center;">
              å½“å‰é€‰æ‹©: æ¨¡å¼ {{ selectedCards }}
            </div>
          </div>

          <!-- Advanced Features -->
          <div class="demo-group" style="margin-top: 32px;">
            <h3>é«˜çº§ç‰¹æ€§ (Contextual)</h3>
            
            <div class="demo-row" style="align-items: flex-start; gap: 24px;">
              <!-- 1. Cover Card -->
              <div style="flex: 1; min-width: 240px;">
                <h4 style="margin: 0 0 12px 0;">åŸºç¡€äº¤äº’ (Clickable)</h4>
                <Card 
                  title="æ¯æ—¥æ¨è" 
                  clickable
                  hoverable
                >
                  <template #extra>
                    <IconStar :size="16" />
                  </template>
                  <div style="font-size: 13px; color: var(--text-secondary); line-height: 1.5;">
                    æ¢ç´¢å±±å·æ¹–æµ·ï¼Œæ„Ÿå—è‡ªç„¶ä¹‹ç¾ã€‚ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹è¯¦æƒ…ã€‚
                  </div>
                </Card>
              </div>


            </div>

              <!-- List Layout usage -->
              <div style="margin-top: 24px;">
                <h4 style="margin: 0 0 12px 0;">åˆ—è¡¨æ¨¡å¼ (List)</h4>
                <ContainerGroup :columns="2" gap="12px">
                   <List v-bind="listPresets.default" title="GitHub" subtitle="github.com" :icon="IconFolder" />
                   <List v-bind="listPresets.default" title="GitLab" subtitle="gitlab.com" :icon="IconSettings" />
                   <List v-bind="listPresets.default" title="Stack Overflow" subtitle="stackoverflow.com" :icon="IconShare" />
                   <List v-bind="listPresets.default" title="MDN Web Docs" subtitle="developer.mozilla.org" :icon="IconMail" />
                </ContainerGroup>
              </div>

              <!-- Row Layout (Standard) -->
              <p style="margin: 24px 0 8px; color: var(--text-secondary);">Row æ¨ªå‘å¸ƒå±€ (layout="row")</p>
              <Card layout="row" title="Row Layout" :icon="IconSettings" bordered hoverable>
                <div style="color: var(--text-secondary); font-size: 14px;">
                  Row å¸ƒå±€å°† Headerï¼ˆå›¾æ ‡+æ ‡é¢˜ï¼‰ç½®äºå·¦ä¾§ï¼ŒBody å†…å®¹ç½®äºå³ä¾§ã€‚é€‚åˆè¾ƒå®½çš„å¡ç‰‡å±•ç¤ºã€‚
                </div>
              </Card>

              <!-- Compact Row Layout -->
              <p style="margin: 12px 0 8px; color: var(--text-secondary);">Compact Row (layout="row" size="sm")</p>
              <ContainerGroup :columns="2" gap="12px">
                 <Card layout="row" size="sm" clickable hoverable title="æ ‡å‡† Row" :icon="IconSettings" />
                 <List v-bind="listPresets.default" title="List é¢„è®¾" subtitle="Boxed Icon | Text Stack" :icon="IconFolder" />
              </ContainerGroup>
              
              <!-- Grid Layout (Internal) -->
              <p style="margin: 16px 0 8px; color: var(--text-secondary);">Grid ç½‘æ ¼å¸ƒå±€ (Internal Grid)</p>
              <Card layout="grid" :grid-columns="3" bordered>
                <div style="background: var(--bg-input); padding: 16px; border-radius: 8px;">Cell 1</div>
                <div style="background: var(--bg-input); padding: 16px; border-radius: 8px;">Cell 2</div>
                <div style="background: var(--bg-input); padding: 16px; border-radius: 8px;">Cell 3</div>
              </Card>

              <!-- Responsive CardGroup -->
              <p style="margin: 16px 0 8px; color: var(--text-secondary);">Responsive Group (min-width="180px")</p>
              <div style="resize: horizontal; overflow: hidden; border: 1px dashed var(--border-color); padding: 12px; width: 100%;">
                <ContainerGroup :min-width="150" gap="12px">
                  <Card
                    v-for="i in 5"
                    :key="i"
                    :title="`Card ${i}`"
                    hoverable
                    style="background: var(--bg-surface-soft);" 
                  >
                    <div style="height: 40px; display: flex; align-items: center; color: var(--text-tertiary);">Content...</div>
                  </Card>
                </ContainerGroup>
              </div>
              <p style="font-size: 12px; color: var(--text-tertiary); margin-top: 4px;">* æ‹–æ‹½æµè§ˆå™¨çª—å£å¯æŸ¥çœ‹è‡ªé€‚åº”æ•ˆæœ</p>

            </div>
          </div>
      </section>


      <!-- ==================== å¡ç‰‡13: Collapse æŠ˜å é¢æ¿ ==================== -->
      <section class="demo-section">
        <h2>Collapse æŠ˜å é¢æ¿</h2>
        
        <!-- v-model åŒå‘ç»‘å®š + æ§åˆ¶é¢æ¿ç¤ºä¾‹ -->
        <div class="demo-group">
          <h3>v-model åŒå‘ç»‘å®š + æ§åˆ¶é¢æ¿</h3>
          <div class="control-bar">
            <button class="demo-btn demo-btn--primary" @click="expandAllPanels">å…¨éƒ¨å±•å¼€</button>
            <button class="demo-btn demo-btn--primary" @click="collapseAllPanels">å…¨éƒ¨æ”¶èµ·</button>
            <span class="status-tag" :class="panel1Expanded ? 'is-expanded' : 'is-collapsed'">
              å¾…åŠ: {{ panel1Expanded ? 'å·²å±•å¼€' : 'å·²æ”¶èµ·' }}
            </span>
            <span class="status-tag" :class="panel2Expanded ? 'is-expanded' : 'is-collapsed'">
              é«˜çº§: {{ panel2Expanded ? 'å·²å±•å¼€' : 'å·²æ”¶èµ·' }}
            </span>
          </div>
          <ContainerGroup :columns="1">
            <Collapse 
              v-model:expanded="panel1Expanded"
              title="å¾…åŠæ¸…å•è®¾ç½®"
              @change="(v: boolean) => console.log('å¾…åŠæ¸…å•:', v)"
            >
              <template #icon><IconChecklist :size="18" /></template>
              <div class="feature-list">
                <div class="feature-item">âœ“ å¼€å¯å¾…åŠæ¸…å•åŠŸèƒ½</div>
                <div class="feature-item">âœ“ é»˜è®¤æŠ˜å æ¸…å•</div>
                <div class="feature-item">âœ“ è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨</div>
                <div class="feature-item">âœ“ æ”¯æŒæ ‡ç­¾åˆ†ç±»</div>
              </div>
            </Collapse>
            <Collapse 
              v-model:expanded="panel2Expanded"
              title="é«˜çº§åŠŸèƒ½"
            >
              <template #icon><IconSettings :size="18" /></template>
              <div class="feature-list">
                <div class="feature-item">âœ“ å¯ç”¨å¿«æ·é”®æ”¯æŒ</div>
                <div class="feature-item">âœ“ è‡ªåŠ¨å¤‡ä»½æ•°æ®</div>
                <div class="feature-item">âœ“ ç•ªèŒ„é’Ÿé›†æˆ</div>
                <div class="feature-item">âœ“ å¯¼å‡ºä¸º Markdown</div>
              </div>
            </Collapse>
            <Collapse 
              title="é»˜è®¤å±•å¼€ç¤ºä¾‹"
              :default-expanded="true"
            >
              <template #icon><IconPalette :size="18" /></template>
              <p style="margin-bottom: 12px;">è¿™ä¸ªé¢æ¿é»˜è®¤æ˜¯å±•å¼€çŠ¶æ€ã€‚</p>
              <p>é€šè¿‡è®¾ç½® <code>:default-expanded="true"</code> å®ç°ã€‚</p>
            </Collapse>
          </ContainerGroup>
        </div>

        <div class="demo-group">
          <h3>åŸºç¡€ç”¨æ³• + å¾½ç« </h3>
          <ContainerGroup :columns="1">
            <Collapse title="æœªè¯»æ¶ˆæ¯" :badge="5" badge-type="danger">
              <template #icon><IconMail :size="18" /></template>
              <p>æ‚¨æœ‰ 5 æ¡æœªè¯»æ¶ˆæ¯ï¼Œç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…ã€‚</p>
            </Collapse>
            <Collapse title="å·²å®Œæˆä»»åŠ¡" :badge="12" badge-type="success">
              <template #icon><IconCheck :size="18" /></template>
              <p>æœ¬å‘¨å®Œæˆ 12 ä¸ªä»»åŠ¡ï¼Œå®Œæˆç‡ 94%ã€‚</p>
            </Collapse>
          </ContainerGroup>
        </div>
        <div class="demo-group">
          <h3>æ‰‹é£ç´æ¨¡å¼</h3>
          <ContainerGroup :columns="1" :accordion="true">
            <Collapse title="é€‰é¡¹ A" panel-id="acc-1">
              <p>é€‰é¡¹ A çš„å†…å®¹ï¼ŒåŒæ—¶åªèƒ½å±•å¼€ä¸€ä¸ªé¢æ¿ã€‚</p>
            </Collapse>
            <Collapse title="é€‰é¡¹ B" panel-id="acc-2">
              <p>é€‰é¡¹ B çš„å†…å®¹ã€‚</p>
            </Collapse>
            <Collapse title="é€‰é¡¹ C" panel-id="acc-3">
              <p>é€‰é¡¹ C çš„å†…å®¹ã€‚</p>
            </Collapse>
          </ContainerGroup>
        </div>
      </section>

      <!-- ==================== å¡ç‰‡14: Collapse å°ºå¯¸ä¸åŠ¨ç”» ==================== -->
      <section class="demo-section">
        <h2>Collapse å°ºå¯¸ä¸åŠ¨ç”»</h2>
        <div class="demo-group">
          <h3>ä¸‰ç§å°ºå¯¸</h3>
          <ContainerGroup :columns="1">
            <Collapse title="Small å°ºå¯¸" size="sm" :show-switch="false">
              <p>ç´§å‡‘å¸ƒå±€ï¼Œé€‚åˆä¾§è¾¹æ ã€‚</p>
            </Collapse>
            <Collapse title="Medium å°ºå¯¸ï¼ˆé»˜è®¤ï¼‰" size="md" :show-switch="false">
              <p>æ ‡å‡†å°ºå¯¸ï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯ã€‚</p>
            </Collapse>
            <Collapse title="Large å°ºå¯¸" size="lg" :show-switch="false">
              <p>å®½æ¾å¸ƒå±€ï¼Œé€‚åˆé‡è¦å†…å®¹ã€‚</p>
            </Collapse>
          </ContainerGroup>
        </div>
        <div class="demo-group">
          <h3>åŠ¨ç”»æ•ˆæœ</h3>
          <ContainerGroup :columns="1">
            <Collapse title="Smooth å¹³æ»‘" collapse-animation="smooth" :show-switch="false">
              <p>æµç•…è‡ªç„¶çš„è¿‡æ¸¡æ•ˆæœ âœ¨</p>
            </Collapse>
            <Collapse title="Bounce å¼¹è·³" collapse-animation="bounce" :show-switch="false">
              <p>æœ‰è¶£çš„å¼¹è·³æ•ˆæœ ğŸ¾</p>
            </Collapse>
            <Collapse title="Elastic å¼¹æ€§" collapse-animation="elastic" :show-switch="false">
              <p>æ©¡çš®ç­‹èˆ¬çš„å¼¹æ€§æ•ˆæœ ğŸª</p>
            </Collapse>
          </ContainerGroup>
        </div>
      </section>

      <!-- ==================== å¡ç‰‡16: Collapse å¸ƒå±€é¢„è®¾ ==================== -->
      <section class="demo-section">
        <h2>Collapse å¸ƒå±€é¢„è®¾</h2>
        <div class="demo-group">
          <h3>5 ç§æ ‡é¢˜æ å¸ƒå±€</h3>
          <ContainerGroup :columns="1">
            <Collapse
              title="default: å›¾æ ‡(å·¦) | æ ‡é¢˜ | æ“ä½œ(å³) | å¼€å…³"
              layout="default"
            >
              <template #actions>
                <button class="action-btn" title="ç¼–è¾‘"><IconEdit :size="16" /></button>
                <button class="action-btn" title="åˆ é™¤"><IconTrash :size="16" /></button>
              </template>
              <p>é»˜è®¤å¸ƒå±€ï¼Œå›¾æ ‡åœ¨å·¦ä¾§ï¼Œæ“ä½œæŒ‰é’®åœ¨å³ä¾§ã€‚</p>
            </Collapse>
            <Collapse
              title="icon-right: æ ‡é¢˜ | æ“ä½œ(å³) | å›¾æ ‡(å³) | å¼€å…³"
              layout="icon-right"
            >
              <template #actions>
                <button class="action-btn" title="è®¾ç½®"><IconSettings :size="16" /></button>
              </template>
              <p>å›¾æ ‡ç§»è‡³å³ä¾§ï¼Œæ›´çªå‡ºæ ‡é¢˜å†…å®¹ã€‚</p>
            </Collapse>
            <Collapse
              title="compact: å›¾æ ‡(å·¦) | æ ‡é¢˜ | å¼€å…³"
              layout="compact"
            >
              <template #actions>
                <button class="action-btn">è¿™ä¸ªä¸ä¼šæ˜¾ç¤º</button>
              </template>
              <p>ç´§å‡‘å¸ƒå±€ï¼Œéšè—æ“ä½œåŒºï¼Œé€‚åˆç®€æ´åœºæ™¯ã€‚</p>
            </Collapse>
            <Collapse
              title="actions-left: å›¾æ ‡(å·¦) | æ“ä½œ | æ ‡é¢˜ | å¼€å…³"
              layout="actions-left"
            >
              <template #actions>
                <button class="action-btn" title="æ”¶è—"><IconStar :size="16" /></button>
                <button class="action-btn" title="åˆ†äº«"><IconShare :size="16" /></button>
              </template>
              <p>æ“ä½œæŒ‰é’®åœ¨æ ‡é¢˜å‰ï¼Œé€‚åˆå¿«æ·æ“ä½œåœºæ™¯ã€‚</p>
            </Collapse>
            <Collapse
              title="minimal: æ ‡é¢˜ | å¼€å…³ï¼ˆæ— å›¾æ ‡æ— æ“ä½œï¼‰"
              layout="minimal"
            >
              <p>æç®€å¸ƒå±€ï¼Œä»…ä¿ç•™æ ‡é¢˜å’Œå¼€å…³ã€‚</p>
            </Collapse>
          </ContainerGroup>
        </div>
      </section>

      <!-- ==================== å¡ç‰‡15: Collapse åµŒå¥—é¢æ¿ ==================== -->
      <section class="demo-section">
        <h2>Collapse åµŒå¥—é¢æ¿</h2>
        <div class="demo-group">
          <h3>æ–‡ä»¶ç›®å½•ç»“æ„</h3>
          <Collapse title="é¡¹ç›®æ ¹ç›®å½•" :default-expanded="true" :show-switch="false">
            <template #icon><IconFolder :size="18" /></template>
            <div class="cj-collapse-nested-container">
              <Collapse title="src" size="sm" :show-switch="false">
                <template #icon><IconFolderOpen :size="16" /></template>
                <div class="cj-collapse-nested-container">
                  <Collapse title="components" size="sm" :show-switch="false">
                    <template #icon><IconFolderOpen :size="16" /></template>
                    <div class="file-list">
                      <div class="file-item">CollapsePanel.vue</div>
                      <div class="file-item">CollapseGroup.vue</div>
                    </div>
                  </Collapse>
                  <Collapse title="styles" size="sm" :show-switch="false">
                    <template #icon><IconFolderOpen :size="16" /></template>
                    <div class="file-list">
                      <div class="file-item">variables.css</div>
                      <div class="file-item">global.css</div>
                    </div>
                  </Collapse>
                </div>
              </Collapse>
              <Collapse title="public" size="sm" :show-switch="false">
                <template #icon><IconFolderOpen :size="16" /></template>
                <div class="file-list">
                  <div class="file-item">favicon.ico</div>
                  <div class="file-item">logo.png</div>
                </div>
              </Collapse>
            </div>
          </Collapse>
        </div>
        <div class="demo-group">
          <h3>é‚®ç®±ç®¡ç†å™¨</h3>
          <ContainerGroup :columns="1">
            <Collapse title="æ”¶ä»¶ç®±" :badge="15" badge-type="danger" :default-expanded="true" :show-switch="false">
              <template #icon><IconMail :size="18" /></template>
              <div class="cj-collapse-nested-container">
                <Collapse title="æ˜Ÿæ ‡é‚®ä»¶" :badge="3" badge-type="warning" size="sm" :show-switch="false">
                  <template #icon><IconStar :size="16" /></template>
                  <p>é‡è¦ä¼šè®®é€šçŸ¥ã€é¡¹ç›® deadline æé†’...</p>
                </Collapse>
                <Collapse title="å›¢é˜Ÿé‚®ä»¶" :badge="8" badge-type="info" size="sm" :show-switch="false">
                  <template #icon><IconUsers :size="16" /></template>
                  <p>é¡¹ç›®è¿›åº¦æ›´æ–°ã€ä»£ç  Review è¯·æ±‚...</p>
                </Collapse>
              </div>
            </Collapse>
            <Collapse title="å·²å‘é€" :badge="42" badge-type="success" :show-switch="false">
              <template #icon><IconSend :size="18" /></template>
              <p>æœ¬æœˆå·²å‘é€ 42 å°é‚®ä»¶</p>
            </Collapse>
          </ContainerGroup>
        </div>
      </section>

    </div>

    <ToastProvider />
    <!-- è‡ªå®šä¹‰å†…å®¹å¯¹è¯æ¡† -->
    <Dialog
      v-model="customDialogVisible"
      title="ç”¨æˆ·ä¿¡æ¯"
      type="info"
      :showCancelBtn="true"
      okText="æäº¤"
      cancelText="å–æ¶ˆ"
      @positive-click="() => { toast.success('è¡¨å•å·²æäº¤'); formData = { name: '', email: '' } }"
    >
      <div style="display: flex; flex-direction: column; gap: 16px;">
        <div>
          <label style="display: block; margin-bottom: 8px; font-size: 14px; color: var(--text-secondary);">å§“å</label>
          <input
            v-model="formData.name"
            type="text"
            placeholder="è¯·è¾“å…¥å§“å"
            style="width: 100%; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 6px; background: var(--bg-secondary); color: var(--text-primary);"
          />
        </div>
        <div>
          <label style="display: block; margin-bottom: 8px; font-size: 14px; color: var(--text-secondary);">é‚®ç®±</label>
          <input
            v-model="formData.email"
            type="email"
            placeholder="è¯·è¾“å…¥é‚®ç®±"
            style="width: 100%; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 6px; background: var(--bg-secondary); color: var(--text-primary);"
          />
        </div>
      </div>
    </Dialog>

    <DialogProvider />
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import {
  IconEdit,
  IconTrash,
  IconSettings,
  IconStar,
  IconShare,
  IconFolder,
  IconFolderOpen,
  IconMail,
  IconSend,
  IconUsers,
  IconChecklist,
  IconCheck,
  IconPalette,
  IconPlus,
  IconTag,
} from '@tabler/icons-vue'
import ToastProvider from './components/Toast/index.vue'
import { useToast } from './components/Toast/composables/useToast'
import { DialogProvider, useDialog, Dialog, dialogPresets } from './components/Dialog'
// import { Button, ButtonGroup } from './components/Button'
import { Card, Collapse, List, ContainerGroup, listPresets } from './components/Container'

const toast = useToast()
const dialog = useDialog()
// const loading = ref(false)
const customDialogVisible = ref(false)
const formData = ref({ name: '', email: '' })

// Collapse v-model åŒå‘ç»‘å®šç¤ºä¾‹
const panel1Expanded = ref(false)
const panel2Expanded = ref(false)

const expandAllPanels = () => {
  panel1Expanded.value = true
  panel2Expanded.value = true
}

const collapseAllPanels = () => {
  panel1Expanded.value = false
  panel2Expanded.value = false
}

// Card Tabs ç¤ºä¾‹
import type { CardTab } from './components/Container'
const demoTabs = ref<CardTab[]>([
  { label: 'Tab 0', value: 'tab0' },
  { label: 'Tab 1', value: 'tab1' },
  { label: 'Tab 2', value: 'tab2' },
  { label: 'Tab 3', value: 'tab3' },
])
const activeTab = ref('tab0')
const selectedCards = ref([2])

// å·²æ³¨é‡Š Toast/Button ç›¸å…³æµ‹è¯•å‡½æ•°
/*
// ç®­å¤´å›¾æ ‡ç»„ä»¶
const ArrowRightIcon = () =>
  h(
    'svg',
    {
      width: '16',
      height: '16',
      viewBox: '0 0 24 24',
      fill: 'none',
      stroke: 'currentColor',
      'stroke-width': '2',
      'stroke-linecap': 'round',
      'stroke-linejoin': 'round',
    },
    [
      h('line', { x1: '5', y1: '12', x2: '19', y2: '12' }),
      h('polyline', { points: '12 5 19 12 12 19' }),
    ]
  )

// æµ‹è¯•æ–¹æ³•
const testUndo = () => {
  toast.success('å·²ç§»è‡³å›æ”¶ç«™', {
    duration: 5000,
    action: {
      label: 'æ’¤å›',
      onClick: () => toast.info('æ“ä½œå·²æ’¤é”€'),
    },
  })
}

const testStack = () => {
  let count = 0
  const timer = setInterval(() => {
    count++
    const types = ['info', 'success', 'warning', 'error'] as const
    toast[types[count % 4]](`å †å æ¶ˆæ¯ #${count}`)
    if (count >= 5) clearInterval(timer)
  }, 250)
}



const testSaveData = async () => {
  await toast.promise(new Promise(resolve => setTimeout(resolve, 2000)), {
    loading: 'ä¿å­˜ä¸­...',
    success: 'æ•°æ®å·²ä¿å­˜',
    error: 'ä¿å­˜å¤±è´¥',
  }) 
}

const testUploadFail = async () => {
  try {
    await toast.promise(
      new Promise((_, reject) => setTimeout(() => reject(new Error('Fail')), 1500)),
      {
        loading: 'ä¸Šä¼ ä¸­...',
        success: 'å®Œæˆ',
        error: 'ç½‘ç»œé”™è¯¯,ä¸Šä¼ å¤±è´¥',
      }
    )
  } catch (e) {
    // ignore
  }
}

const handleSubmit = () => {
  loading.value = true
  setTimeout(() => {
    loading.value = false
  }, 2000)
}
*/
</script>

<style scoped>
.demo-page {
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 40px 0; /* å‡å°‘å·¦å³paddingï¼Œäº¤ç»™gridå¤„ç† */
  font-family: var(--font-family-base, system-ui, -apple-system, sans-serif);
}

.demo-header {
  text-align: center;
  margin-bottom: 30px;
  color: white;
  padding: 0 20px;
}

.demo-header h1 {
  font-size: 42px;
  font-weight: 700;
  margin: 0 0 8px 0;
  text-shadow: 0 2px 15px rgba(0, 0, 0, 0.2);
}

.demo-header p {
  font-size: 16px;
  opacity: 0.9;
  margin: 0;
}

/* ================== æ ¸å¿ƒå¸ƒå±€ ================== */
.demo-grid {
  /* å¼ºåˆ¶å æ»¡å®½åº¦ï¼Œé¢„ç•™å°‘é‡è¾¹è· */
  width: 100%;
  padding: 0 20px;
  box-sizing: border-box; 
  
  /* ç€‘å¸ƒæµæ ¸å¿ƒ */
  column-count: 4;
  column-gap: 20px;
}

.demo-section {
  background: var(--bg-panel);
  backdrop-filter: var(--glass-sm);
  border: var(--border-glass);
  border-radius: var(--radius-lg);
  padding: 16px;
  box-shadow: var(--shadow-md);
  
  /* é˜²æ­¢å¡ç‰‡è¢«åˆ—æ–­å¼€ */
  break-inside: avoid;
  display: inline-block;
  width: 100%;
  margin-bottom: 20px; /* å‚ç›´é—´è· */
  vertical-align: top;
  box-sizing: border-box;
}

/* ================== ç»„ä»¶å†…éƒ¨æ ·å¼ ================== */
.demo-section h2 {
  font-size: 16px;
  margin: 0 0 12px 0;
  color: var(--text-primary);
  border-bottom: 1px solid var(--color-divider);
  padding-bottom: 8px;
  font-weight: 700;
}

.demo-group {
  margin-bottom: 14px;
}

.demo-group:last-child {
  margin-bottom: 0;
}

.demo-group h3 {
  font-size: 12px;
  margin: 0 0 6px 0;
  color: var(--text-secondary);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.demo-row {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  align-items: center;
}

/* æ™®é€šæµ‹è¯•æŒ‰é’®æ ·å¼ */
.demo-row button:not(.lime-btn) {
  padding: 5px 10px;
  border-radius: 4px;
  border: 1px solid var(--color-divider);
  background: white;
  color: var(--text-primary);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.demo-row button:not(.lime-btn):hover {
  background: var(--bg-hover);
  border-color: #667eea;
  color: #667eea;
}

/* ä¹å®«æ ¼å¸ƒå±€ */
.positions-grid {
  display: grid;
  grid-template-columns: repeat(3, 32px);
  grid-template-rows: repeat(3, 32px);
  gap: 4px;
}

.positions-grid button {
  width: 32px;
  height: 32px;
  padding: 0 !important;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
}

.grid-empty {
  width: 32px;
  height: 32px;
}

/* æŒ‡å—è¡¨æ ¼ */
.guide-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
}

.guide-table th,
.guide-table td {
  padding: 6px 4px;
  text-align: left;
  border-bottom: 1px solid var(--color-divider);
}

.guide-table th {
  color: var(--text-secondary);
  font-weight: 600;
}

.guide-table td {
  color: var(--text-primary);
}

.guide-table code {
  background: rgba(0,0,0,0.06);
  padding: 1px 4px;
  border-radius: 3px;
  font-family: monospace;
  color: #d0436d;
}

/* ================== å“åº”å¼æ–­ç‚¹ (ä¼˜å…ˆåˆ—æ•°) ================== */

/* å®½å± & æ™®é€šç¬”è®°æœ¬: å¼ºåˆ¶ 4 åˆ— */
@media (min-width: 1201px) {
  .demo-grid {
    column-count: 4;
  }
}

/* ä¸­ç­‰å±å¹• (å¹³æ¿æ¨ªå±/å°ç¬”è®°æœ¬): 3 åˆ— */
@media (max-width: 1200px) {
  .demo-grid {
    column-count: 3;
  }
}

/* å¹³æ¿ç«–å±: 2 åˆ— */
@media (max-width: 850px) {
  .demo-grid {
    column-count: 2;
  }
}

/* æ‰‹æœº: 1 åˆ— */
@media (max-width: 550px) {
  .demo-grid {
    column-count: 1;
  }
  .demo-header h1 {
    font-size: 32px;
  }
}

/* ================== Collapse ç¤ºä¾‹ä¸“ç”¨æ ·å¼ ================== */
.control-bar {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--space-3);
  margin-bottom: var(--space-4);
  padding: var(--space-3);
  background: var(--bg-panel);
  border-radius: var(--radius-md);
  border: var(--border-glass);
}

.demo-btn {
  padding: var(--comp-padding-md);
  border-radius: var(--radius-sm);
  border: none;
  cursor: pointer;
  font-size: var(--text-base);
  font-weight: var(--weight-medium);
  transition: var(--transition-base);
}

.demo-btn--primary {
  background-color: var(--color-primary);
  color: white;
}

.demo-btn--primary:hover {
  background-color: var(--color-primary-hover);
}

.status-tag {
  display: inline-block;
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-sm);
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
}

.status-tag.is-expanded {
  background-color: var(--color-success-bg);
  color: var(--color-success);
}

.status-tag.is-collapsed {
  background-color: var(--bg-input);
  color: var(--text-tertiary);
}

.feature-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.feature-item {
  font-size: var(--text-base);
  color: var(--text-secondary);
}

.file-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.file-item {
  font-size: var(--text-sm);
  color: var(--text-tertiary);
  padding: var(--space-1) 0;
}

code {
  background: var(--bg-input);
  padding: 2px 6px;
  border-radius: var(--radius-xs);
  font-family: var(--font-family-mono);
  font-size: var(--text-sm);
}

.action-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  padding: 0;
  border: none;
  background-color: transparent;
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: var(--transition-base);
  font-size: 14px;
}

.action-btn:hover {
  background-color: var(--bg-hover);
}

/* åµŒå¥—å®¹å™¨ */
.cj-collapse-nested-container {
  display: flex;
  flex-direction: column;
  gap: 0;
  min-height: 0;
}
</style>

<style>
/* å…¨å±€æ ·å¼è¦†ç›– */
body {
  overflow-y: auto !important;
  padding: 0 !important;
  margin: 0 !important;
  height: auto !important;
}
</style>